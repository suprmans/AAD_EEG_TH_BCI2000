<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Contributions:MicroLeadsADC - BCI2000 Help</title>
<link rel='shortcut icon' href='../../rsrc/favicon.ico' />
<style type='text/css'>
html { font-size:95%; font-family:arial,helvetica,sans-serif }
.printfooter { display:none }
#tocmain { font-size:81%; font-weight:bold; color:grey; background-color:white; border:1px solid black; padding:1em; z-index:10; position:fixed; left:-1px; top:-1px; width:150px; }
#tocmain a { color:black; text-decoration:none }
#tocmain ul { margin:0 0 0 0.4em; padding:0.1em 0 0 0.1em; list-style-position:outside; list-style-type:disc }
#tocmain li { text-indent:0; margin:0 0 0 1em; padding: 0 0 0 0 }
#tocmain p { margin:0; padding:0.1em 0 0 0.1em }
#tocmain .toc1 { margin-left:1.25em; }
#tocmain .toc2 { margin-left:2.25em; }
#tocmain .toc3 { margin-left:3.25em; }
#article { font-size:91%; position:absolute; left:200px; right:0; padding:1em; margin:0 }
</style>
</head>
<body>
 <div id='tocmain'>
 <a href='Main_Page.html'><img src='../../rsrc/bci2000logo.svg' alt='[Main Page]' /></a> <hr class="sep" /><p class="toc0"><a href="User_Tutorial%253ABCI2000_Tour.html">GettingStarted</a></p><ul></ul><p class="toc0"><a href="User_Reference%253AContents.html">User Manual</a></p><ul></ul><p class="toc0"><a href="Technical_Reference%253AContents.html">Technical Reference</a></p><ul></ul><p class="toc0"><a href="Programming_Reference%253AContents.html">Programming Manual</a></p><ul></ul><p class="toc0"><a href="Contributions%253AContents.html">Contributions</a></p><ul><li class="toc1"><a href="Contributions%253AADCs.html">Data Acquisition</a></li><li class="toc1"><a href="Contributions%253AFileWriters.html">File Formats</a></li><li class="toc1"><a href="Contributions%253ASignalProcessing.html">Signal Processing</a></li><li class="toc1"><a href="Contributions%253AApplications.html">Applications</a></li><li class="toc1"><a href="Contributions%253ATools.html">Tools</a></li></ul><hr class="sep" /><p class="toc0"><a href="BCI2000_Glossary.html">BCI2000 Glossary</a></p> </div>
 <div id='article'>
 <h1 class = "pagetitle">MicroLeadsADC</h1>
 <p class = "subtitle">Contributions</p>
 <hr class = "sep" />
 <div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr"><div class="mw-parser-output"><div id="toc" class="toc" role="navigation" aria-labelledby="mw-toc-heading"><input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none" /><div class="toctitle" lang="en" dir="ltr"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="MicroLeadsADC.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="MicroLeadsADC.html#Video_Overview"><span class="tocnumber">2</span> <span class="toctext">Video Overview</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="MicroLeadsADC.html#Versioning"><span class="tocnumber">3</span> <span class="toctext">Versioning</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="MicroLeadsADC.html#Authors"><span class="tocnumber">3.1</span> <span class="toctext">Authors</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="MicroLeadsADC.html#Version_History"><span class="tocnumber">3.2</span> <span class="toctext">Version History</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="MicroLeadsADC.html#Source_Code_Revisions"><span class="tocnumber">3.3</span> <span class="toctext">Source Code Revisions</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="MicroLeadsADC.html#Known_Issues"><span class="tocnumber">3.4</span> <span class="toctext">Known Issues</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="MicroLeadsADC.html#Using_the_MicroLeads_ADC"><span class="tocnumber">4</span> <span class="toctext">Using the MicroLeads ADC</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="MicroLeadsADC.html#Setting_up_the_Hardware"><span class="tocnumber">5</span> <span class="toctext">Setting up the Hardware</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="MicroLeadsADC.html#Included_Hardware"><span class="tocnumber">5.1</span> <span class="toctext">Included Hardware</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="MicroLeadsADC.html#Hardware_Setup"><span class="tocnumber">5.2</span> <span class="toctext">Hardware Setup</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="MicroLeadsADC.html#Laptop"><span class="tocnumber">5.2.1</span> <span class="toctext">Laptop</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="MicroLeadsADC.html#Router"><span class="tocnumber">5.2.2</span> <span class="toctext">Router</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="MicroLeadsADC.html#Basestation"><span class="tocnumber">5.2.3</span> <span class="toctext">Basestation</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="MicroLeadsADC.html#Powerpad"><span class="tocnumber">5.2.4</span> <span class="toctext">Powerpad</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="MicroLeadsADC.html#System_Level_Setup"><span class="tocnumber">5.3</span> <span class="toctext">System Level Setup</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="MicroLeadsADC.html#Verifying_with_Micro-Leads_Software"><span class="tocnumber">6</span> <span class="toctext">Verifying with Micro-Leads Software</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="MicroLeadsADC.html#Initial_Setup"><span class="tocnumber">6.1</span> <span class="toctext">Initial Setup</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="MicroLeadsADC.html#Charging_the_Device"><span class="tocnumber">6.2</span> <span class="toctext">Charging the Device</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="MicroLeadsADC.html#Proper_Charging"><span class="tocnumber">6.2.1</span> <span class="toctext">Proper Charging</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="MicroLeadsADC.html#Micro-Leads_GUI"><span class="tocnumber">6.2.2</span> <span class="toctext">Micro-Leads GUI</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="MicroLeadsADC.html#Python_API"><span class="tocnumber">6.2.3</span> <span class="toctext">Python API</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="MicroLeadsADC.html#Verifying_Device_Properties"><span class="tocnumber">6.3</span> <span class="toctext">Verifying Device Properties</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="MicroLeadsADC.html#How_to_set_up_with_BCI2000"><span class="tocnumber">7</span> <span class="toctext">How to set up with BCI2000</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="MicroLeadsADC.html#Connecting_to_the_Devices"><span class="tocnumber">7.1</span> <span class="toctext">Connecting to the Devices</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="MicroLeadsADC.html#Creating_a_Batch_File"><span class="tocnumber">7.2</span> <span class="toctext">Creating a Batch File</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="MicroLeadsADC.html#Using_MicroLeads_ADC"><span class="tocnumber">7.3</span> <span class="toctext">Using MicroLeads ADC</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28"><a href="MicroLeadsADC.html#Understanding_how_it_works"><span class="tocnumber">8</span> <span class="toctext">Understanding how it works</span></a>
<ul>
<li class="toclevel-2 tocsection-29"><a href="MicroLeadsADC.html#Communication_Protocol"><span class="tocnumber">8.1</span> <span class="toctext">Communication Protocol</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="MicroLeadsADC.html#Command_Packet_Structure"><span class="tocnumber">8.2</span> <span class="toctext">Command Packet Structure</span></a>
<ul>
<li class="toclevel-3 tocsection-31"><a href="MicroLeadsADC.html#Header"><span class="tocnumber">8.2.1</span> <span class="toctext">Header</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="MicroLeadsADC.html#Data"><span class="tocnumber">8.2.2</span> <span class="toctext">Data</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="MicroLeadsADC.html#Ender"><span class="tocnumber">8.2.3</span> <span class="toctext">Ender</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-34"><a href="MicroLeadsADC.html#Data_Packet_Structure"><span class="tocnumber">8.3</span> <span class="toctext">Data Packet Structure</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="MicroLeadsADC.html#Header_2"><span class="tocnumber">8.3.1</span> <span class="toctext">Header</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="MicroLeadsADC.html#Data_2"><span class="tocnumber">8.3.2</span> <span class="toctext">Data</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-37"><a href="MicroLeadsADC.html#Debugging"><span class="tocnumber">8.4</span> <span class="toctext">Debugging</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-38"><a href="MicroLeadsADC.html#Parameters"><span class="tocnumber">9</span> <span class="toctext">Parameters</span></a>
<ul>
<li class="toclevel-2 tocsection-39"><a href="MicroLeadsADC.html#SourceCh"><span class="tocnumber">9.1</span> <span class="toctext">SourceCh</span></a></li>
<li class="toclevel-2 tocsection-40"><a href="MicroLeadsADC.html#SampleBlockSize"><span class="tocnumber">9.2</span> <span class="toctext">SampleBlockSize</span></a></li>
<li class="toclevel-2 tocsection-41"><a href="MicroLeadsADC.html#SamplingRate"><span class="tocnumber">9.3</span> <span class="toctext">SamplingRate</span></a></li>
<li class="toclevel-2 tocsection-42"><a href="MicroLeadsADC.html#SourceChOffset"><span class="tocnumber">9.4</span> <span class="toctext">SourceChOffset</span></a></li>
<li class="toclevel-2 tocsection-43"><a href="MicroLeadsADC.html#SourceChGain"><span class="tocnumber">9.5</span> <span class="toctext">SourceChGain</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="MicroLeadsADC.html#ChannelNames"><span class="tocnumber">9.6</span> <span class="toctext">ChannelNames</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="MicroLeadsADC.html#ReferenceCh"><span class="tocnumber">9.7</span> <span class="toctext">ReferenceCh</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-46"><a href="MicroLeadsADC.html#Device_Parameters"><span class="tocnumber">10</span> <span class="toctext">Device Parameters</span></a>
<ul>
<li class="toclevel-2 tocsection-47"><a href="MicroLeadsADC.html#Implant_StimZ_address"><span class="tocnumber">10.1</span> <span class="toctext">Implant StimZ address</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="MicroLeadsADC.html#Powerpad_StimZ_address"><span class="tocnumber">10.2</span> <span class="toctext">Powerpad StimZ address</span></a></li>
<li class="toclevel-2 tocsection-49"><a href="MicroLeadsADC.html#Implant_Radio_Frequency_Channel"><span class="tocnumber">10.3</span> <span class="toctext">Implant Radio Frequency Channel</span></a></li>
<li class="toclevel-2 tocsection-50"><a href="MicroLeadsADC.html#Powerpad_Radio_Frequency_Channel"><span class="tocnumber">10.4</span> <span class="toctext">Powerpad Radio Frequency Channel</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-51"><a href="MicroLeadsADC.html#Stimulation_Parameters"><span class="tocnumber">11</span> <span class="toctext">Stimulation Parameters</span></a>
<ul>
<li class="toclevel-2 tocsection-52"><a href="MicroLeadsADC.html#Enable_STIM0"><span class="tocnumber">11.1</span> <span class="toctext">Enable STIM0</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="MicroLeadsADC.html#Enable_STIM1"><span class="tocnumber">11.2</span> <span class="toctext">Enable STIM1</span></a></li>
<li class="toclevel-2 tocsection-54"><a href="MicroLeadsADC.html#Enable_Recording"><span class="tocnumber">11.3</span> <span class="toctext">Enable Recording</span></a></li>
<li class="toclevel-2 tocsection-55"><a href="MicroLeadsADC.html#Supply_Voltage"><span class="tocnumber">11.4</span> <span class="toctext">Supply Voltage</span></a></li>
<li class="toclevel-2 tocsection-56"><a href="MicroLeadsADC.html#Stimulation_Pulse_Settings"><span class="tocnumber">11.5</span> <span class="toctext">Stimulation Pulse Settings</span></a>
<ul>
<li class="toclevel-3 tocsection-57"><a href="MicroLeadsADC.html#Phase1_Duration"><span class="tocnumber">11.5.1</span> <span class="toctext">Phase1 Duration</span></a></li>
<li class="toclevel-3 tocsection-58"><a href="MicroLeadsADC.html#Interphase_Duration"><span class="tocnumber">11.5.2</span> <span class="toctext">Interphase Duration</span></a></li>
<li class="toclevel-3 tocsection-59"><a href="MicroLeadsADC.html#Phase2_Duration"><span class="tocnumber">11.5.3</span> <span class="toctext">Phase2 Duration</span></a></li>
<li class="toclevel-3 tocsection-60"><a href="MicroLeadsADC.html#Phase1_STIM0_Amplitude_counts"><span class="tocnumber">11.5.4</span> <span class="toctext">Phase1 STIM0 Amplitude counts</span></a></li>
<li class="toclevel-3 tocsection-61"><a href="MicroLeadsADC.html#Phase1_STIM1_Amplitude_counts"><span class="tocnumber">11.5.5</span> <span class="toctext">Phase1 STIM1 Amplitude counts</span></a></li>
<li class="toclevel-3 tocsection-62"><a href="MicroLeadsADC.html#Phase2_STIM0_Amplitude_count"><span class="tocnumber">11.5.6</span> <span class="toctext">Phase2 STIM0 Amplitude count</span></a></li>
<li class="toclevel-3 tocsection-63"><a href="MicroLeadsADC.html#Phase2_STIM1_Amplitude_count"><span class="tocnumber">11.5.7</span> <span class="toctext">Phase2 STIM1 Amplitude count</span></a></li>
<li class="toclevel-3 tocsection-64"><a href="MicroLeadsADC.html#Charge_Recovery_Counts"><span class="tocnumber">11.5.8</span> <span class="toctext">Charge Recovery Counts</span></a></li>
<li class="toclevel-3 tocsection-65"><a href="MicroLeadsADC.html#Stim_Period_Counts"><span class="tocnumber">11.5.9</span> <span class="toctext">Stim Period Counts</span></a></li>
<li class="toclevel-3 tocsection-66"><a href="MicroLeadsADC.html#ADC_Gain"><span class="tocnumber">11.5.10</span> <span class="toctext">ADC Gain</span></a></li>
<li class="toclevel-3 tocsection-67"><a href="MicroLeadsADC.html#Exfil_Iface"><span class="tocnumber">11.5.11</span> <span class="toctext">Exfil_Iface</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-68"><a href="MicroLeadsADC.html#See_also"><span class="tocnumber">12</span> <span class="toctext">See also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>MicroLeadsADC is a source module that allows for utilization of the Micro-Leads StimZ recording and stimulation device within BCI2000.
</p>
<h2><span class="mw-headline" id="Video_Overview">Video Overview</span></h2>
<h2><span class="mw-headline" id="Versioning">Versioning</span></h2>
<h3><span class="mw-headline" id="Authors">Authors</span></h3>
<ul><li>Dhruva Mehta (mehta@neurotechcenter.org)</li></ul>
<h3><span class="mw-headline" id="Version_History">Version History</span></h3>
<ul><li>2/10/2023 Initial Creation and Setup</li></ul>
<h3><span class="mw-headline" id="Source_Code_Revisions">Source Code Revisions</span></h3>
<ul><li>Initial development:</li>
<li>Tested under:</li>
<li>Known to compile under:</li>
<li>Broken since: --</li></ul>
<h3><span class="mw-headline" id="Known_Issues">Known Issues</span></h3>
<p>There are a few known issues with the MicroLeads device system.
</p><p>Sometimes when the device has been commanded to stop recording or stimulating, further commands to it will not work as the device is unresponsive. The solution for this has been to let the device lose power completely, and then recharge it. 
</p><p>There are some issues with getting consistent data from stimulation. At times, the stimulation will abruptly stop as well. When using the associated GUI from MicroLeads, this was usually accompanied by a "Compliance" error.
</p><p>Communication for commands is not consistent either. It may take several attempts to get the device to start working.
</p>
<h2><span class="mw-headline" id="Using_the_MicroLeads_ADC">Using the MicroLeads ADC</span></h2>
<p>To use the MicroLeads ADC, you will need to have been provided with the basic hardware from Micro-Leads. Below we will go over the mandatory and optional hardware/software parts necessary to ensure a smooth use of the MicroLeads ADC.
</p>
<h2><span class="mw-headline" id="Setting_up_the_Hardware">Setting up the Hardware</span></h2>
<h3><span class="mw-headline" id="Included_Hardware">Included Hardware</span></h3>
<p>The following is a list of the hardware that should have been provided to you:
</p>
<ul><li><b>Wireless Implant</b>
<ul><li>This is the implantable device that can record and stimulate wirelessly.</li></ul></li>
<li><b>Powerpad with power cable</b>
<ul><li>This is the device that allows for wireless charging of the implantable device.</li></ul></li>
<li><b>Basestation with power cable</b>
<ul><li>This is the device that communicates with the implant and the powerpad by sending commands, receiving information and data, and then relaying it to the router.</li></ul></li>
<li><b>Wireless Router with power cable</b>
<ul><li>The router is require for creating an ethernet sub-network for base station ethernet communication</li></ul></li>
<li><b>Two Ethernet cables</b>
<ul><li>Required to connect the basestation to the router and the router to the computer.</li></ul></li>
<li><b>Ethernet to USB adapter</b>
<ul><li>Optional adapter if the computer you are using does not have an ethernet port. Will be needed for verification with the Micro-Leads provided laptop.</li></ul></li>
<li><b>Laptop with Micro-Leads Interface Software</b>
<ul><li>This laptop should have the interface executable to use for initial device verification. It should also have the ***stimZ_config.ini*** that has the device information and properties.</li></ul></li></ul>
<p>Below are figures detailing what each device looks like with labels.
</p>
<h3><span class="mw-headline" id="Hardware_Setup">Hardware Setup</span></h3>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 1009.3333333333px"><div style="width: 1009.3333333333px">
			<div class="thumb" style="width: 1007.3333333333px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_setup_overview.png" class="image" title="Hardware Setup Overview"><img alt="Hardware Setup Overview" src="../images/7/77/Microleads_setup_overview.png" decoding="async" width="1008" height="500" /></a></div></div>
			<div class="gallerytext">
<p>Hardware Setup Overview
</p>
			</div>
		</div></li>
</ul>
<p>Considering how many cables and devices there are, it is helpful to have a step-by-step procedure to ensure that everything is set up smoothly.
</p>
<h4><span class="mw-headline" id="Laptop">Laptop</span></h4>
<p>The first thing to set up is the laptop. Ensure that the laptop charger is plugged into an outlet and that the charger is plugged into the laptop.
</p>
<h4><span class="mw-headline" id="Router">Router</span></h4>
<p>The next step is to set up the router. 
</p><p>First, plug the power adapter for the router into an outlet and then plug the power adapter into the router. Ensure that the router turns on.
</p><p>Next, plug the ethernet to USB adapter into an open USB port on the laptop.
</p><p>Finally, we will use one of the ethernet cables to connect the router and the laptop. 
Plug one end of the cable into the open port on the ethernet to USB adapter. 
Plug the other end of the cable into one of the 4 available black ports on the router. 
Do <b>not</b> plug it into the blue port.
</p>
<h4><span class="mw-headline" id="Basestation">Basestation</span></h4>
<p>Next we will set up the basestation.
</p><p>First, ensure that the antenna is securely attached to the basestation. Use the <b>shorter</b> antenna.
</p><p>Next, plug the power adapter into the outlet and then into the micro-usb port of the basestation. 
</p><p>Finally, we will use the other ethernet cable to connect the router to the basestation.
Plug one end of the cable into the open ethernet port on the basestation.
Then, similarly to the previous step, plug the other end of the cable into one of the 3 remaining available black ports on the router.
Once again, do <b>not</b> plug it into the blue port.
</p>
<h4><span class="mw-headline" id="Powerpad">Powerpad</span></h4>
<p>Next we will set up the powerpad. 
</p><p>First, screw the power adapter onto the powerpad, ensuring that it is tightly attached.
</p><p>Next, plug the power adapter into a wall outlet.
</p><p>Test to see if the powerpad turns on by pressing the rubber power switch located on one of the short sides of the pad. The switch should light up blue when it is on. A square should also light up green, located to the left of the switch and the right of the location to screw the power adapter on.
</p><p>Finally, attach the <b>longer</b> antenna to the powerpad by screwing it on.
</p><p>With this, your initial setup should be complete! You should keep the powerpad and implant decently close to the basestation to ensure proper communication, but they don't need to be right next to each other.
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 891.33333333333px"><div style="width: 891.33333333333px">
			<div class="thumb" style="width: 889.33333333333px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_setup.png" class="image" title="Example setup"><img alt="Example setup" src="../images/e/e5/Microleads_setup.png" decoding="async" width="890" height="500" /></a></div></div>
			<div class="gallerytext">
<p>Example setup
</p>
			</div>
		</div></li>
</ul>
<h3><span class="mw-headline" id="System_Level_Setup">System Level Setup</span></h3>
<p><b>This section is only relevant to users with multiple devices.</b>
</p><p>The Micro-Leads system has capabilities for multiple device integration. You would follow the same steps as previous for each device. 
</p><p>However, there are limitations to the system overall when using multiple devices:
</p>
<ul><li>There can only be one router per laptop at a time.</li>
<li>There can only be one basestation per router at a time.</li>
<li>A basestation can connect to up to 7 powerpads simulataneously.</li>
<li>A basestation can connect to up to 7 implants simultaneously.</li>
<li>A powerpad can connect to only one basestation at a time.</li>
<li>An implant can connect to only one basestation at a time.</li>
<li>A basestation can only stream recording data from one implant at a time.</li>
<li>When a basestation is streaming recording data, it cannot communicate with any other powerpads or implants.</li>
<li>Two implants cannot share the same frequency/channel.</li></ul>
<p>In essence, if you would like to stream recording data for multiple devices at once <b>you need another full setup</b>. This is because a basestation can only stream recording data from one implant at a time.
</p><p>Otherwise, you may just need more powerpads and implants if you would like to switch between which device you are streaming recording data from.
</p><p><b>Currently, MicroLeads ADC only supports one hardware setup at a time.</b> However, if you have multiple hardware setups, you can still use BCI2000 with each. You would just need to have a PC with BCI2000 installed for each of them.
</p>
<h2><span class="mw-headline" id="Verifying_with_Micro-Leads_Software">Verifying with Micro-Leads Software</span></h2>
<p>At this point, all of the hardware should be set up to allow for communication and verification.
</p>
<h3><span class="mw-headline" id="Initial_Setup">Initial Setup</span></h3>
<p>First we will open up the interface executable on the provided laptop. This may be called <b>Stim-Z-GUI</b> or <b>RHD2000Interface</b>.
</p><p>You should now see a GUI that looks similar to this:
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 850.66666666667px"><div style="width: 850.66666666667px">
			<div class="thumb" style="width: 848.66666666667px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_gui.png" class="image"><img alt="Microleads gui.png" src="../images/2/2e/Microleads_gui.png" decoding="async" width="849" height="500" /></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
</ul>
<p>Next, we will connect to the basestation. Click the pulldown menu that says "Select Base Station", and then click connect once you have it selected.
</p><p>Next, click on the button in the lower left corner that says "Select Devices". A pop-up menu should appear.
</p><p>In this menu, select the devices on the left and click the middle arrow button. The devices should appear in the columns on the right like this:
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 822.66666666667px"><div style="width: 822.66666666667px">
			<div class="thumb" style="width: 820.66666666667px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_select_devices_gui.png" class="image"><img alt="Microleads select devices gui.png" src="../images/b/b3/Microleads_select_devices_gui.png" decoding="async" width="821" height="500" /></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
</ul>
<p>Click "Confirm" to close the pop-up.
</p><p>Next, click the "Pair Devices" button. Another pop-up menu should appear that looks like this:
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 587.33333333333px"><div style="width: 587.33333333333px">
			<div class="thumb" style="width: 585.33333333333px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_scan_gui.png" class="image"><img alt="Microleads scan gui.png" src="../images/7/7a/Microleads_scan_gui.png" decoding="async" width="586" height="500" /></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
</ul>
<p>On this menu, click the box labeled "Enable Charging". Then click "Scan". The scan will take a few seconds and take multiple tries to discover all devices. Discovered devices will be highlighted green while unverified devices will show up as red. If your implant has no charge, it may show up red for some time. In this case, you will need to charge the device which is discussed next.
</p><p>At this time, you should be able to test your implant device.
</p>
<h3><span class="mw-headline" id="Charging_the_Device">Charging the Device</span></h3>
<p>First, we will make sure that the device is charged. There are two ways to do this. The first way is through the Micro-Leads GUI while the second one is through the Micro-Leads Python API.
</p>
<h4><span class="mw-headline" id="Proper_Charging">Proper Charging</span></h4>
<p>To ensure that the implant will be charging properly, make sure that the device is positioned as shown in the following diagram:
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 1363.3333333333px"><div style="width: 1363.3333333333px">
			<div class="thumb" style="width: 1361.3333333333px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_charging_picture.png" class="image" title="Charging Position Guide"><img alt="Charging Position Guide" src="../images/5/5c/Microleads_charging_picture.png" decoding="async" width="1362" height="500" /></a></div></div>
			<div class="gallerytext">
<p>Charging Position Guide
</p>
			</div>
		</div></li>
</ul>
<p>Essentially, you want to make sure there is enough surface area for the implant relative to the powerpad to be able to charge. You also want to make sure that the implant is not too far from the powerpad to be able to charge. There may be dead zones on the powerpad, so there might be some trial and error required for optimal placement.
</p>
<h4><span class="mw-headline" id="Micro-Leads_GUI">Micro-Leads GUI</span></h4>
<p>In the Micro-Leads GUI, click on the "Charge All" tab. Here, you can charge the devices that are connected to the base station. To do this, click "Start Monitor".
</p><p>You should be able to hear a dull whirring noise from the powerpad if it is charging your device.
</p><p>Clicking on a device will query its statement of health.
</p><p><b>There is a bug where sometimes the powerpad stops charging, despite showing it is within the GUI</b>. If that happens, click "Stop Monitor" and "Start Monitor" again. This may require some supervision as a result. If you have access to the Python API, however, there is a method to make sure the powerpad continues to charge, described next.
</p>
<h4><span class="mw-headline" id="Python_API">Python API</span></h4>
<p>If you have access to the Python API, you can use a Powershell script to ensure charging.
</p><p>First, make sure that the wheel file you received is installed in a python environment properly.
</p><p>Next open a Powershell terminal and navigate to your python environment. <b>You will need to know the address and channel for the powerpad.</b> This can be found from the config.ini file. Details on where to find that are <a href="MicroLeadsADC.html#Using_MicroLeads_ADC">here</a>
</p><p>Run the "charge enable" function. An example looks like this:
</p>
<pre>python -m stimZscripts.example_charge_enable -a 192.168.1.10 -z 10 -c 70
</pre>
<p>Next, we will be running a script that queries "statements of health" from the powerpad. <b>This is required because if a statement of health is not queried within a certain time period, the powerpad will turn off.</b> And example of this script is shown below:
</p>
<pre>for ($je1; $j -le 100; $j++) {<br />python -m stimZscripts.example_soh -a 192.168.1.10 -z 10 -d powerpad -c 70<br />Sleep(60);<br />}
</pre>
<h3><span class="mw-headline" id="Verifying_Device_Properties">Verifying Device Properties</span></h3>
<p>To verify the device works properly, we need to test the leads. I used an oscilloscope and breadboard to test, but you may use another method if you wish.
</p><p>First I will discuss the device layout and the leads themselves. 
</p><p>The top of the device has the white leads to the right of the blue leads. The bottom will show an inverse. It should match the following image:
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 2768.6666666667px"><div style="width: 2768.6666666667px">
			<div class="thumb" style="width: 2766.6666666667px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_implant_position.png" class="image" title="Implant Position Guide"><img alt="Implant Position Guide" src="../images/7/73/Microleads_implant_position.png" decoding="async" width="2767" height="500" /></a></div></div>
			<div class="gallerytext">
<p>Implant Position Guide
</p>
			</div>
		</div></li>
</ul>
<p>Next, we will identify the electrodes. The white wires correspond to "ENG0/Stim0" and "EMG0". The blue wires correspond to "ENG1/Stim1" and "EMG1". The ENG/Stim wires are connected to 300 micrometer bipolar cuff electrodes. EMG1 is connected to a bipolar EUS electrode while EMG0 is not connected. 
</p><p><b>Note: The wires haven't been labeled by Micro-Leads. Determining which wire corresponds to which channel, as well as which wires are the reference wires will need to be determined through trial and error.</b>
</p><p>Once you have determined which wires correspond to which channel, we can test them to confirm they work properly.
</p><p>I used a Tektronix TDS2014C Oscilloscope to verify the stimulation output matched the parameters set in the MicroLeads GUI.
</p><p>First, we must set our parameters within the MicroLeads GUI. Click the “Select Stimulation Parameters” button.
</p><p>The meaning of each parameter corresponds to the following diagram. 
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 1272.6666666667px"><div style="width: 1272.6666666667px">
			<div class="thumb" style="width: 1270.6666666667px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Microleads_pulse_definition.png" class="image" title="Pulse Definition"><img alt="Pulse Definition" src="../images/b/b0/Microleads_pulse_definition.png" decoding="async" width="1271" height="400" /></a></div></div>
			<div class="gallerytext">
<p>Pulse Definition
</p>
			</div>
		</div></li>
</ul>
<ol><li>Period is the overall frequency of repetition of the pulse waveform</li>
<li>Phase Durations (1&amp;2) are the durations of positive and negative stimulationcurrent.</li>
<li>Phase Amplitudes (1&amp;2) are the amplitudes of the stimulation current.</li>
<li>Interpulse Duration is the period between the two phases of current pulses.</li>
<li>Charge Recovery Duration is the duration after the current phases when the stimulation channel is grounded to clear any residual unbalanced charge.</li></ol>
<p>For verification, set the parameters to your desired values. If you don’t have values for your experiment yet, feel free to match the values shown here. 
</p><p>Check STIM0 and/or STIM1 if stimulation is needed. Check “Enable Recording” if
streaming neural data is needed. 
</p>
<ol><li>If stimulation is used (with or without recording), set “Supply Voltage” to 9V</li>
<li>If Recording only is used (no stimulation) set “Supply Voltage” to 4V</li></ol>
<p>Now, click “Verify Stimulation Parameters” and close the dialogue box.
</p><p>You can now run the recording and use your preferred method to verify that pulses are being generated.
</p>
<h2><span class="mw-headline" id="How_to_set_up_with_BCI2000">How to set up with BCI2000</span></h2>
<p>Now we will set up the research PC. First, follow the BCI2000 installation guide found <a href="Programming_Howto%253ABuilding_and_Customizing_BCI2000.html" title="Programming Howto:Building and Customizing BCI2000">here</a> to install BCI2000 and compile the solution on your PC.
</p>
<h3><span class="mw-headline" id="Connecting_to_the_Devices">Connecting to the Devices</span></h3>
<p>when using BCI2000, the research PC will replace the provided laptop from MicroLeads. First, we will have to connect the PC to the devices using the ethernet adapter. Simply plug it in to an empty USB port.
</p><p>Next, we have to make sure that the ethernet connection is on the same network subnet mask and that the IPv4 address is able to communicate with the basestation.
</p><p>To do this, first open up a command prompt and type
</p>
<pre>ipconfig /all
</pre>
<p>A list of IP connections should show up now. Scroll and find the connection that lists ethernet and might have Realtek USB controller as the connection.
</p><p>Check to see if the IPv4 configuration starts with 192.168.1.X where X is any number. Also check to make sure that the default gateway is set.
</p><p>If it does, great! You can move on to the next step. If not, all we need to do is change the IPv4 configuration.
</p><p>In the Windows toolbar, search control panel. Then click on Network and Internet. Then click on Network and Sharing Center.
</p><p>On the left hand side, you should see "Change adapter settings". Click on that, and then right click on the Ethernet connection associated with the adapter. It should say "Realtek USB controller" or something similar. Click on "Properties" in the popup.
</p><p>Find "Internet Protocol Version 4 (TCP/IPv4)" and double-click. Toggle the section "Use the following IP address" on.
</p><p>For IP address, use any IP address that isn't in use currently and starts with 192.168.1 . 
For subnet mask, use 255.255.255.0.
For default gateway, use 192.168.1.1.
</p><p>Make sure no warnings popup after validating, and you should be able to continue!
</p>
<h3><span class="mw-headline" id="Creating_a_Batch_File">Creating a Batch File</span></h3>
<p>Although it is not necessary, it is convenient to create a batch file to run BCI2000 with the MicroLeadsADC.  To create the batch file, start out with a copy of a suitable batch file in <tt>BCI2000/batch/</tt>, and open it in a text editor.
</p><p>Towards the end of the file, you will see a sequence of lines beginning with
</p>
<pre>start executable 
</pre>
<p>These lines are responsible for starting up source, signal processing, and application module, in that sequence. To use the MicroleadsADC module, you will need to replace the executable name in the first entry, e.g.
</p>
<pre>start executable SignalGenerator --local
</pre>
<p>becomes
</p>
<pre>start executable MicroLeadsADC --local
</pre>
<p>For more information, see <a href="Contributions%253AHow_to_use_a_Contributed_Source_Module.html#Creating_batch_files" title="Contributions:How to use a Contributed Source Module">this page</a>.
</p>
<h3><span class="mw-headline" id="Using_MicroLeads_ADC">Using MicroLeads ADC</span></h3>
<p>To set up your experiment using BCI2000, there are a list of parameters that you may set during configuration. 
</p><p>First you will need to locate the configuration file on the laptop provided to you by MicroLeads. Navigate to the GUI configuration file, located at <b>&lt;user&gt;/AppData/Roaming/RHD2000interface/config/stimZ_config.ini</b>. Here you will see a list of configurations for the various devices in the system.
</p><p>The file should look like this:
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 440px"><div style="width: 440px">
			<div class="thumb" style="width: 438px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Config_ini_arrows.PNG" class="image"><img alt="Config ini arrows.PNG" src="../images/7/7b/Config_ini_arrows.PNG" decoding="async" width="438" height="500" /></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
</ul>
<p>Specifically look for the sections for the "PowerPad" and the "Remote". For each of these, note down the "stimZ_addr" and the "radio_addr". These will be used for BCI2000.
</p><p>Once you have compiled the MicroLeadsADC module, you can begin collecting data with BCI2000 by following the steps below.
</p>
<ol><li>Double click <tt>BCI2000/batch/DummyApplication_MicroLeadsADC.bat</tt> - the batch file that was created in the previous section - to start BCI2000.</li>
<li>Click the "Configure" button.</li>
<li>Set the appropriate parameters. The MicroLeadsADC module is initialized with a number of parameters that can be configured from the "Source" tab. A summary and description of these parameters can be found <a href="MicroLeadsADC.html#Parameters">below</a>. Importantly, make sure to enter the numbers that you noted down from the previous step for the corresponding device!</li>
<li>Click "Set Config".</li>
<li>Click "Start" to begin your experiment.</li></ol>
<h2><span class="mw-headline" id="Understanding_how_it_works">Understanding how it works</span></h2>
<h3><span class="mw-headline" id="Communication_Protocol">Communication Protocol</span></h3>
<p>Communication between the various devices in the MicroLeads system is governed by the basestation. The base station will initiate Stim-Z wireless communications, while the implants and chargers respond to the commands they received from the base station. For any data to be transferred, the basestation must request it from the respective device; no unsolicited information will be transmitted.
</p><p>To facilitate this, 3 different ports are used. The command packet relay is done through TCP port 3031, while data streaming is done through UDP ports 2020 and 2323. UDP port 2323 is used to listen for a data streaming request while UDP port 2020 is the port that data is sent to.
</p>
<h3><span class="mw-headline" id="Command_Packet_Structure">Command Packet Structure</span></h3>
<p>Commands are sent in a specific structure. They consist of a four-byte packet header, followed by a data payload, followed by a packet ender.
</p>
<h4><span class="mw-headline" id="Header">Header</span></h4>
<pre>Byte[0]: Start byte, value is always 0x7e
Byte[1]: OP byte (packet type).  Range is 0x00 to 0xff
Byte[2]: Sequence/Address byte.
Byte[3]: Packet data payload length in bytes.
</pre>
<h4><span class="mw-headline" id="Data">Data</span></h4>
<p>The data payload structure depends specifically on the packet type. If you need to manipulate this during debugging, please refer to the Stim-Z_API provided by MicroLeads.
</p>
<h4><span class="mw-headline" id="Ender">Ender</span></h4>
<p>The ender for commands is calculated from the following CRC8 polynomial
</p>
<pre>x^8 + x^7 + x^6 + x^3 + x^2 + 1
</pre>
<p>The second byte is always 0x0a.
</p>
<h3><span class="mw-headline" id="Data_Packet_Structure">Data Packet Structure</span></h3>
<p>Similar to the command packets, data packets also have a specific structure, consisting of the following:
</p>
<pre>Header:  4 bytes
Payload: 960 + 8 + 16 = 984 bytes
CRC:     4 bytes
</pre>
<h4><span class="mw-headline" id="Header_2">Header</span></h4>
<p>The header matches the same specification of the command packet. However, importantly, the second byte indicates the FEC decoder status of the packet:
</p>
<pre>0x40: The FEC decoder marked the packet bad (undecodeable)
0x20: The FEC decoder corrected bits in the packet and got a valid checksum
0x10: The FEC decoder corrected bits in the packet, but the packet checksum is still bad
</pre>
<h4><span class="mw-headline" id="Data_2">Data</span></h4>
<p>The data payload includes 960 bytes of recording data and 24 bytes of out-of-band data.
</p><p>The 960 bytes of recording data are split into 160 smaller tuples like so:
</p>
<pre>sample[0]: ENG0 sample
sample[1]: EMG0 sample
sample[2]: ENG1 sample
sample[3]: ENG0 sample
sample[4]: EMG1 sample
sample[5]: ENG1 sample
</pre>
<p>Since the ENG channels record at twice the frequency of the EMG channels, there are twice as many samples. The OOB data has not been implemented with BCI2000.
</p>
<h3><span class="mw-headline" id="Debugging">Debugging</span></h3>
<p>Debugging with the MicroLeads system is a relatively straightforward process. This section assumes that you have API access and the documentation provided from MicroLeads.
</p><p>First, please make sure that the devices are functioning properly with the MicroLeads software and that the device issue lies with BCI2000 rather than an error within the device or experiment implementation.
</p><p>Next, download Wireshark on your research PC <a rel="nofollow" class="external text" href="https://www.wireshark.org/download.html">here</a>. Wireshark is a network protocol analysis tool that we will use to analyze the commands that are sent from the basestation through BCI2000 as well as verify that we are receiving data.
</p><p>Now open up Wireshark and click on the Ethernet network, shown below:
</p>
<ul class="gallery mw-gallery-packed">
		<li class="gallerybox" style="width: 957.33333333333px"><div style="width: 957.33333333333px">
			<div class="thumb" style="width: 955.33333333333px;"><div style="margin:0px auto;"><a href="https://www.bci2000.org/mediawiki/index.php/File:Wireshark_1.PNG" class="image"><img alt="Wireshark 1.PNG" src="../images/f/f6/Wireshark_1.PNG" decoding="async" width="956" height="500" /></a></div></div>
			<div class="gallerytext">
			</div>
		</div></li>
</ul>
<p>Now, you may run the experiment through BCI2000 following the previously discussed procedure <a href="https://www.bci2000.org/mediawiki/index.php/">here</a>.
</p><p>At this time, you should see more requests appearing through Wireshark. After some time, you can stop BCI2000 as well as stop the recording on Wireshark. 
</p><p>There are two main things to learn from the Wireshark data. First, we can manually verify the packets and headers sent to and from the basestation to see if they match up with what is expected in the API. Second, we should be able to see a constant stream of data coming from UDP port 2020. 
</p><p>If either of these do not occur, there is most likely an issue with the stimulation device. The solution to this is to let the implant lose power, and then recharge it to reset communication with the basestation. 
</p><p>If both of these do occur, there may have been a communication error with BCI2000. In this case, try to rerun the experiment settings multiple times to be able to visualize the data stream in BCI2000.
</p>
<h2><span class="mw-headline" id="Parameters">Parameters</span></h2>
<h3><span class="mw-headline" id="SourceCh">SourceCh</span></h3>
<p>The total number of digitized and stored channels. Because of device limitations, this is set to 4 channels explicitly.
</p>
<h3><span class="mw-headline" id="SampleBlockSize">SampleBlockSize</span></h3>
<p>Samples per channel per digitized block. 
Together with the sampling rate, this parameter determines how often per second data are collected, processed, and feedback is updated. For example, at 1000 Hz sampling and a SampleBlockSize of 20, the system (e.g., source signal display, signal processing, and stimulus presentation) will be updated 50 times per second.
</p>
<h3><span class="mw-headline" id="SamplingRate">SamplingRate</span></h3>
<p>The sample rate of the system. This parameter cannot be edited, and will default to the sampling rate available from the implant which is 21500 Hz. 
In case you are experiencing problems by higher sampling rates (e.g., data loss, jerky display, etc.), increase the SampleBlockSize so that you are updating the system less frequently (usually, updating the system 20-30 times per second is sufficient for most applications).
</p>
<h3><span class="mw-headline" id="SourceChOffset">SourceChOffset</span></h3>
<p>Offset for each channel.
</p>
<h3><span class="mw-headline" id="SourceChGain">SourceChGain</span></h3>
<p>Gain for each channel. 
</p>
<h3><span class="mw-headline" id="ChannelNames">ChannelNames</span></h3>
<p>Names of each channel.
</p>
<h3><span class="mw-headline" id="ReferenceCh">ReferenceCh</span></h3>
<p>This list defines what channels will be used as reference. This list is uploaded to the device and set in hardware, effecting the raw bio-signal data that is recorded by BCI2000. If you do not want to effect the raw bio-signal data that is recorded, you can use the <a rel="nofollow" class="external text" href="User_Reference%253ASpatialFilter.html">spatial filter</a>. If this parameter is set to auto, no reference channels are used.
</p>
<h2><span class="mw-headline" id="Device_Parameters">Device Parameters</span></h2>
<p>These parameters can be found in the "Device Settings" tab of the BCI2000 config window. These settings are provided to you from MicroLeads and are set for each device. 
</p>
<h3><span class="mw-headline" id="Implant_StimZ_address">Implant StimZ address</span></h3>
<p>This parameter sets sets the StimZ address of the implant for use with BCI2000. This parameter is necessary to ensure that commands sent through BCI2000 are actually sent. 
</p><p>The possible values for this parameter are 0-13, and it will not be the same as the Powerpad StimZ address.
</p>
<h3><span class="mw-headline" id="Powerpad_StimZ_address">Powerpad StimZ address</span></h3>
<p>This parameter sets sets the StimZ address of the powerpad for use with BCI2000. This parameter is necessary to ensure that commands sent through BCI2000 are actually sent. 
</p><p>The possible values for this parameter are 0-13, and it will not be the same as the Implant StimZ address.
</p>
<h3><span class="mw-headline" id="Implant_Radio_Frequency_Channel">Implant Radio Frequency Channel</span></h3>
<p>This parameter sets sets the radio frequency channel of the implant for use with BCI2000. This parameter is necessary to ensure that commands sent through BCI2000 are actually sent. 
</p><p>The possible values for this parameter are 10, 20, 30, ... 80, and it will not be the same as the Powerpad Radio Frequency Channel.
</p>
<h3><span class="mw-headline" id="Powerpad_Radio_Frequency_Channel">Powerpad Radio Frequency Channel</span></h3>
<p>This parameter sets sets the radio frequency channel of the powerpad for use with BCI2000. This parameter is necessary to ensure that commands sent through BCI2000 are actually sent. 
</p><p>The possible values for this parameter are 10, 20, 30, ... 80, and it will not be the same as the Implant Radio Frequency Channel.
</p>
<h2><span class="mw-headline" id="Stimulation_Parameters">Stimulation Parameters</span></h2>
<p>These parameters can be found in the "Stimulation" tab of the BCI2000 config window. 
</p>
<ul class="gallery mw-gallery-packed">
</ul>
<h3><span class="mw-headline" id="Enable_STIM0">Enable STIM0</span></h3>
<p>This parameter enables/disables stimulation for the STIM0 channel. 
</p>
<h3><span class="mw-headline" id="Enable_STIM1">Enable STIM1</span></h3>
<p>This parameter enables/disables stimulation for the STIM1 channel. 
</p>
<h3><span class="mw-headline" id="Enable_Recording">Enable Recording</span></h3>
<p>This parameter enables/disables streaming of neural data.
</p>
<h3><span class="mw-headline" id="Supply_Voltage">Supply Voltage</span></h3>
<p>This parameter sets the supply voltage from a range of 4V to 9V. <b>When the user is recording only, the voltage must be 4V. When the user is stimulating at all, the voltage must be 9V.</b> 
</p>
<h3><span class="mw-headline" id="Stimulation_Pulse_Settings">Stimulation Pulse Settings</span></h3>
<p>This group of parameters define the shape of the charge balanced stimulation pulses, as described in Fig 1. Limitations will be detailed for each parameter.
[[File: |600px|thumb|center|upright=2.5|Figure 1. Pulse definition]]
</p>
<h4><span class="mw-headline" id="Phase1_Duration">Phase1 Duration</span></h4>
<p>This parameter sets the length of the Phase 1 Duration in counts of 11.6 microseconds. To obtain the proper value, divide your duration by 11.6 microseconds.
</p>
<h4><span class="mw-headline" id="Interphase_Duration">Interphase Duration</span></h4>
<p>This parameter sets the length of the Interphase Duration in counts of 11.6 microseconds. To obtain the proper value, divide your duration by 11.6 microseconds.
</p>
<h4><span class="mw-headline" id="Phase2_Duration">Phase2 Duration</span></h4>
<p>This parameter sets the length of the Phase 2 Duration in counts of 11.6 microseconds. To obtain the proper value, divide your duration by 11.6 microseconds.
</p>
<h4><span class="mw-headline" id="Phase1_STIM0_Amplitude_counts">Phase1 STIM0 Amplitude counts</span></h4>
<p>This parameter sets the Phase 1 amplitude for the STIM0 channel in counts of 10 microAmps. To obtain the proper value, divide your amplitude by 10 microAmps.
</p>
<h4><span class="mw-headline" id="Phase1_STIM1_Amplitude_counts">Phase1 STIM1 Amplitude counts</span></h4>
<p>This parameter sets the Phase 1 amplitude for the STIM1 channel in counts of 10 microAmps. To obtain the proper value, divide your amplitude by 10 microAmps.
</p>
<h4><span class="mw-headline" id="Phase2_STIM0_Amplitude_count">Phase2 STIM0 Amplitude count</span></h4>
<p>This parameter sets the Phase 2 amplitude for the STIM0 channel in counts of 10 microAmps. To obtain the proper value, divide your amplitude by 10 microAmps.
</p>
<h4><span class="mw-headline" id="Phase2_STIM1_Amplitude_count">Phase2 STIM1 Amplitude count</span></h4>
<p>This parameter sets the Phase 2 amplitude for the STIM1 channel in counts of 10 microAmps. To obtain the proper value, divide your amplitude by 10 microAmps.
</p>
<h4><span class="mw-headline" id="Charge_Recovery_Counts">Charge Recovery Counts</span></h4>
<p>This parameter sets the length of the Charge Recovery Duration in counts of 11.6 microseconds. To obtain the proper value, divide your duration by 11.6 microseconds.
</p>
<h4><span class="mw-headline" id="Stim_Period_Counts">Stim Period Counts</span></h4>
<p>This parameter sets the length of the Stim Period Duation in counts of 11.6 microseconds. To obtain the proper value, divide your duration by 11.6 microseconds.
</p>
<h4><span class="mw-headline" id="ADC_Gain">ADC Gain</span></h4>
<p>This parameter sets the ADC Gain. When recording only, set the parameter to 0. When stimulating, set the parameter to 1.
</p>
<h4><span class="mw-headline" id="Exfil_Iface">Exfil_Iface</span></h4>
<p>This parameter sets the exfil settings. When recording only, set the parameter to 2. When stimulating, set the parameter to 0.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<p><a href="User_Reference%253AFilters.html" title="User Reference:Filters">User Reference:Filters</a>, <a href="Contributions%253AADCs.html" title="Contributions:ADCs">Contributions:ADCs</a>
</p>
<!-- 
NewPP limit report
Cached time: 20241129160309
Cache expiry: 86400
Reduced expiry: false
Complications: [show‐toc]
CPU time usage: 0.077 seconds
Real time usage: 0.082 seconds
Preprocessor visited node count: 269/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/100
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 5312/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->

<!-- Saved in parser cache with key wikidb-bci_:pcache:idhash:2534-0!canonical and timestamp 20241129160309 and revision id 11254.
 -->
</div></div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://www.bci2000.org/mediawiki/index.php?title=Contributions:MicroLeadsADC&amp;oldid=11254">http://www.bci2000.org/mediawiki/index.php?title=Contributions:MicroLeadsADC&amp;oldid=11254</a>"</div>
 </div>
</body>
</html>